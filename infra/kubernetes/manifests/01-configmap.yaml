apiVersion: v1
kind: ConfigMap
metadata:
  name: lucia
  namespace: lucia
  labels:
    app.kubernetes.io/name: lucia
    app.kubernetes.io/component: config
data:
  # Redis Configuration
  Redis__Host: "lucia-redis"
  Redis__Port: "6379"
  Redis__Database: "0"
  Redis__DefaultExpiry: "86400"  # 24 hours in seconds

  # LLM Configuration - Chat Model
  # Replace with your actual endpoints and model names
  ConnectionStrings__chat-model: |
    Endpoint=https://api.openai.com/v1;
    Model=gpt-4o-mini;
    Provider=openai;

  # LLM Configuration - Embedding Model
  ConnectionStrings__embedding-model: |
    Endpoint=https://api.openai.com/v1;
    Model=text-embedding-3-small;
    Provider=azureopenai;

  ConnectionStrings__redis: "lucia-redis:6379"

  # Home Assistant Configuration
  HomeAssistant__BaseUrl: "http://homeassistant:8123"

  # MongoDB Configuration
  ConnectionStrings__luciatraces: "mongodb://lucia-mongodb:27017/luciatraces"
  ConnectionStrings__luciaconfig: "mongodb://lucia-mongodb:27017/luciaconfig"

  # Session Cache Configuration
  SessionCache__SessionCacheLengthMinutes: "5"
  SessionCache__MaxHistoryItems: "20"

  # Trace Capture Configuration
  TraceCapture__Enabled: "true"
  TraceCapture__RetentionDays: "30"

  # Logging Configuration
  Logging__Console__IncludeScopes: "true"
  Logging__Console__TimestampFormat: "yyyy-MM-dd HH:mm:ss.fff zzz"
  Logging__LogLevel__Default: "Information"
  Logging__LogLevel__Microsoft: "Warning"

  # Application Settings
  ASPNETCORE_ENVIRONMENT: "Production"
  ASPNETCORE_URLS: "http://+:8080"

  # Feature Flags
  Features__SemanticSearch: "true"
  Features__MultiAgentOrchestration: "true"
  Features__ContextPreservation: "true"

  # Observability
  Observability__Enabled: "true"
  OpenTelemetry__TraceExporter: "http://jaeger-collector:4317"
  OpenTelemetry__MetricsExporter: "http://prometheus:8888"

  # Environment
  Environment: "production"
